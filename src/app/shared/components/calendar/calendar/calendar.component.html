<ng-template #monthViewDefaultDisplayEventTemplate let-view="view">
  <time [attr.datetime]="view.date" 
        [ngClass]="{ 'flex h-6 w-6 items-center justify-center rounded-full bg-primary-600 font-semibold text-white' : view.current }"
  >{{ view.label }}</time>
  <ol class="mt-2" *ngIf="view.events.length > 0">
    <li *ngFor="let event of view.events">
      <a href="#" class="flex group">
        <p class="flex-auto font-medium truncate text-slate-900 dark:text-white/75 group-hover:text-primary-600">{{ event.title }}</p>
        <time [attr.datetime]="event.startTime" class="flex-none hidden ml-3 text-slate-500 group-hover:text-primary-600 xl:block">{{ event.startTime }}</time>
      </a>
    </li>
  </ol>
</ng-template>
<ng-template
  #monthViewDefaultEventDetailTemplate
  let-showEventDetail="showEventDetail"
  let-selectedDate="selectedDate" let-noEventsLabel="noEventsLabel">
  <div class="event-detail-container" has-bouncing="false" *ngIf="showEventDetail" overflow-scroll="false">
    <div class="event-detail-item" *ngFor="let event of selectedDate?.events" (click)="eventSelected(event)">
      <span *ngIf="!event.allDay" class="monthview-eventdetail-timecolumn">
        {{ event.startTime | date: 'HH:mm' }}
          -
        {{ event.endTime | date: 'HH:mm' }}
      </span>
      <span *ngIf="event.allDay" class="monthview-eventdetail-timecolumn">{{ allDayLabel }}</span>
      <span class="event-detail">  |  {{ event.title }}</span>
    </div>
    <div class="event-detail-item" *ngIf="selectedDate?.events.length === 0">
      <div class="no-events-label">{{ noEventsLabel }}</div>
    </div>
  </div>
</ng-template>
<ng-template #defaultWeekViewHeaderTemplate let-viewDate="viewDate">
  {{ viewDate.dayHeader }}
</ng-template>
<ng-template #defaultAllDayEventTemplate let-displayEvent="displayEvent">
  <div class="calendar-event-inner">{{ displayEvent.event.title }}</div>
</ng-template>
<ng-template #defaultNormalEventTemplate let-displayEvent="displayEvent">
  <div class="calendar-event-inner">{{ displayEvent.event.title }}</div>
</ng-template>
<ng-template #defaultWeekViewAllDayEventSectionTemplate let-day="day" let-eventTemplate="eventTemplate">
  <div [ngClass]="{'calendar-event-wrap': day.events}" *ngIf="day.events"
       [ngStyle]="{height: 25*day.events.length+'px'}">
      <div *ngFor="let displayEvent of day.events" class="calendar-event" tappable
           (click)="eventSelected(displayEvent.event)"
           [ngStyle]="{top: 25*displayEvent.position+'px', width: 100*(displayEvent.endIndex-displayEvent.startIndex)+'%', height: '25px'}">
          <ng-template [ngTemplateOutlet]="eventTemplate"
                       [ngTemplateOutletContext]="{displayEvent:displayEvent}">
          </ng-template>
      </div>
  </div>
</ng-template>
<ng-template #defaultNormalEventSectionTemplate let-tm="tm" let-hourParts="hourParts" let-eventTemplate="eventTemplate">
  <div [ngClass]="{'calendar-event-wrap': tm.events}" *ngIf="tm.events">
    <div *ngFor="let displayEvent of tm.events" class="calendar-event" tappable
        (click)="eventSelected(displayEvent.event)"
        [ngStyle]="{top: (37*displayEvent.startOffset/hourParts)+'px',left: 100/displayEvent.overlapNumber*displayEvent.position+'%', width: 100/displayEvent.overlapNumber+'%', height: 37*(displayEvent.endIndex -displayEvent.startIndex - (displayEvent.endOffset + displayEvent.startOffset)/hourParts)+'px'}">
        <ng-template [ngTemplateOutlet]="eventTemplate" 
                      [ngTemplateOutletContext]="{displayEvent:displayEvent}">
        </ng-template>
    </div>
  </div>
</ng-template>

<div [ngSwitch]="calendarMode" class="{{ calendarMode }}-view">
  <month-view *ngSwitchCase="'month'"
    [formatDay]="formatDay"
    [formatDayHeader]="formatDayHeader"
    [formatMonthTitle]="formatMonthTitle"
    [startingDayMonth]="startingDayMonth"
    [showEventDetail]="showEventDetail"
    [noEventsLabel]="noEventsLabel"
    [autoSelect]="autoSelect"
    [eventSource]="eventSource"
    [markDisabled]="markDisabled"
    [monthViewDisplayEventTemplate]="monthViewDisplayEventTemplate || monthViewDefaultDisplayEventTemplate"
    [monthViewEventDetailTemplate]="monthViewEventDetailTemplate|| monthViewDefaultEventDetailTemplate"
    [locale]="locale"
    [dateFormatter]="dateFormatter"
    [monthClass]="monthClass"
    (onRangeChanged)="rangeChanged($event)"
    (onEventSelected)="eventSelected($event)"
    (onTimeSelected)="timeSelected($event)"
    (onTitleChanged)="titleChanged($event)">
  </month-view>
</div>